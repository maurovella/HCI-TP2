var _0x5ec9=['inflateDto','update','remove','find','inflateDtos','findOne','homeId','homes','then','meta','home','fromDto','all','config','dbName','log','loading\x20room\x20database\x20[',']...','debug','ensureIndex','error','room\x20database\x20loaded','info','nedb','exports','rooms.db','models','room','toDto','rooms','insert','context','name'];(function(_0x1d2076,_0x2a7e5a){var _0x6ffefc=function(_0x3ddd21){while(--_0x3ddd21){_0x1d2076['push'](_0x1d2076['shift']());}};_0x6ffefc(++_0x2a7e5a);}(_0x5ec9,0x7a));var _0x3e66=function(_0xd7f44e,_0x2c40f3){_0xd7f44e=_0xd7f44e-0x0;var _0x12c2cb=_0x5ec9[_0xd7f44e];return _0x12c2cb;};'use strict';var Datastore=require(_0x3e66('0x0'));var Path=require('path');module[_0x3e66('0x1')]={'initialize':function(_0x2b91ed,_0x53dce6){_0x2b91ed['rooms']={'dbName':_0x3e66('0x2'),'create':function(_0x424e3f){return new Promise((_0x44252d,_0x1858d3)=>{var _0x2453f4=_0x2b91ed[_0x3e66('0x3')][_0x3e66('0x4')][_0x3e66('0x5')](_0x424e3f);_0x2b91ed['db'][_0x3e66('0x6')][_0x3e66('0x7')](_0x2453f4,(_0x355736,_0x5d824d)=>{if(_0x355736){_0x355736[_0x3e66('0x8')]={'entity':{'type':_0x3e66('0x4'),'id':_0x2453f4[_0x3e66('0x9')]}};_0x1858d3(_0x355736);}else{_0x44252d(_0x2b91ed[_0x3e66('0x6')][_0x3e66('0xa')](_0x5d824d));}});});},'update':function(_0x28b5ae){return new Promise((_0x566b43,_0x49fb79)=>{var _0x217d74=_0x2b91ed[_0x3e66('0x3')][_0x3e66('0x4')][_0x3e66('0x5')](_0x28b5ae);_0x2b91ed['db'][_0x3e66('0x6')][_0x3e66('0xb')]({'_id':_0x217d74['_id']},_0x217d74,{},(_0x82412c,_0x3b2340)=>{if(_0x82412c){_0x82412c[_0x3e66('0x8')]={'entity':{'type':_0x3e66('0x4'),'id':_0x217d74['name']}};_0x49fb79(_0x82412c);}else{_0x566b43(_0x3b2340==0x1);}});});},'delete':function(_0x4aa7a4){return new Promise((_0x404036,_0x1dc430)=>{_0x2b91ed['db'][_0x3e66('0x6')][_0x3e66('0xc')]({'_id':_0x4aa7a4},{},(_0x4d50f4,_0x5ad440)=>{if(_0x4d50f4){_0x1dc430(_0x4d50f4);}else{_0x404036(_0x5ad440==0x1);}});});},'retrieveAll':function(){return new Promise((_0x266f51,_0x5d75da)=>{_0x2b91ed['db'][_0x3e66('0x6')][_0x3e66('0xd')]({},(_0x403211,_0x51bc9e)=>{if(_0x403211){_0x5d75da(_0x403211);}else{_0x266f51(_0x2b91ed['rooms'][_0x3e66('0xe')](_0x51bc9e));}});});},'retrieveByHomeId':function(_0x42ce24){return new Promise((_0x59f4fd,_0xc7a83b)=>{_0x2b91ed['db'][_0x3e66('0x6')][_0x3e66('0xd')]({'homeId':_0x42ce24},(_0xe04ea9,_0x4d1ff4)=>{if(_0xe04ea9){_0xc7a83b(_0xe04ea9);}else{_0x59f4fd(_0x2b91ed[_0x3e66('0x6')]['inflateDtos'](_0x4d1ff4));}});});},'retrieveById':function(_0x2944de){return new Promise((_0x3b51f5,_0x3c3a34)=>{_0x2b91ed['db']['rooms'][_0x3e66('0xf')]({'_id':_0x2944de},(_0x577af2,_0x1ee215)=>{if(_0x577af2){_0x3c3a34(_0x577af2);}else{_0x3b51f5(_0x2b91ed[_0x3e66('0x6')][_0x3e66('0xa')](_0x1ee215));}});});},'inflateDto':function(_0x2a0433){return new Promise((_0x11b485,_0x209b1f)=>{if(!_0x2a0433)_0x11b485(null);else{if(_0x2a0433[_0x3e66('0x10')]){_0x2b91ed[_0x3e66('0x11')]['retrieveById'](_0x2a0433[_0x3e66('0x10')])[_0x3e66('0x12')](_0x52dded=>{if(!_0x52dded)_0x11b485(null);else{delete _0x52dded[_0x3e66('0x13')];_0x2a0433[_0x3e66('0x14')]=_0x52dded;delete _0x2a0433['homeId'];_0x11b485(_0x2b91ed['models']['room'][_0x3e66('0x15')](_0x2a0433));}});}else{_0x11b485(_0x2b91ed[_0x3e66('0x3')][_0x3e66('0x4')]['fromDto'](_0x2a0433));}}});},'inflateDtos':function(_0xb38307){return new Promise((_0x1e73ff,_0x208452)=>{var _0x1cd9df=_0xb38307['map'](_0x277a64=>{return _0x2b91ed[_0x3e66('0x6')][_0x3e66('0xa')](_0x277a64);});Promise[_0x3e66('0x16')](_0x1cd9df)[_0x3e66('0x12')](_0x815017=>{_0x1e73ff(_0x815017);});});}};return _0x53dce6();},'start':function(_0x359621,_0x232b76){var _0x5f023f=Path['join'](_0x359621[_0x3e66('0x17')]['general']['paths']['db'][0x0],_0x359621[_0x3e66('0x6')][_0x3e66('0x18')]);_0x359621[_0x3e66('0x19')](_0x3e66('0x1a')+_0x5f023f+_0x3e66('0x1b'),_0x3e66('0x1c'));_0x359621['db']=_0x359621['db']||{};_0x359621['db'][_0x3e66('0x6')]=new Datastore({'filename':_0x5f023f,'autoload':!![]});_0x359621['db']['rooms'][_0x3e66('0x1d')]({'fieldName':'name','unique':!![]},_0x3f2cb0=>{if(_0x3f2cb0)_0x359621[_0x3e66('0x19')](_0x3f2cb0,_0x3e66('0x1e'));});_0x359621['log'](_0x3e66('0x1f'),_0x3e66('0x20'));return _0x232b76();}};