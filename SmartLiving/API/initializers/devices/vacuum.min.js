var _0x1a06=['mop','exports','devices','vacuum','status','inactive','now','state','batteryLevel','location','getInternalState','setMode','changing\x20vacuum\x20\x27','\x27...','debug','modes','log','mode\x20\x27','\x27\x20is\x20invalid','info','mode','vacuum\x20\x27','\x27\x20new\x20mode\x20is\x20\x27','events','push','modeChanged','dock','retrieveById','then','device\x20id\x20\x27','vacuum\x20room\x20is\x20not\x20set','rooms','room','room\x20id\x20\x27','roomId','name','docked','statusChanged','dockedSince','catch','setLocation','\x27\x20location\x20to\x20\x27','active','\x27\x20is\x20not\x20\x27','\x27\x20new\x20location\x20is\x20\x27','\x27\x20status\x20to\x20\x27','\x27\x20is\x20already\x20\x27','\x27\x20battery\x20level\x20\x27','dockedInterval','activeSince','\x27\x20new\x20status\x20is\x20\x27','pause','activeInterval','toString','stringify'];(function(_0x4bd822,_0x2bd6f7){var _0xb4bdb3=function(_0x1d68f6){while(--_0x1d68f6){_0x4bd822['push'](_0x4bd822['shift']());}};_0xb4bdb3(++_0x2bd6f7);}(_0x1a06,0x1f0));var _0x5a71=function(_0x4d5a1f,_0x511362){_0x4d5a1f=_0x4d5a1f-0x0;var _0x52e253=_0x1a06[_0x4d5a1f];return _0x52e253;};module[_0x5a71('0x0')]={'initialize':function(_0x51e87d,_0x23783c){_0x51e87d[_0x5a71('0x1')][_0x5a71('0x2')]=class{constructor(_0x24462a,_0x10f15e){this['id']=_0x24462a;this['state']=_0x10f15e||{'status':_0x51e87d[_0x5a71('0x1')][_0x5a71('0x2')][_0x5a71('0x3')][_0x5a71('0x4')],'mode':_0x5a71('0x2'),'location':null,'activeSince':null,'activeInterval':0x0,'dockedSince':Date[_0x5a71('0x5')](),'dockedInterval':0x14};}['getState'](){return{'status':this['state']['status'],'mode':this[_0x5a71('0x6')]['mode'],'batteryLevel':this[_0x5a71('0x7')],'location':this[_0x5a71('0x6')][_0x5a71('0x8')]};}[_0x5a71('0x9')](){return this[_0x5a71('0x6')];}[_0x5a71('0xa')](_0x27ae03){return new Promise((_0x1b3a05,_0x5313c7)=>{_0x51e87d['log'](_0x5a71('0xb')+this['id']+'\x27\x20mode\x20to\x20\x27'+_0x27ae03+_0x5a71('0xc'),_0x5a71('0xd'));if(!_0x51e87d['devices'][_0x5a71('0x2')][_0x5a71('0xe')][_0x27ae03]){_0x51e87d[_0x5a71('0xf')](_0x5a71('0x10')+_0x27ae03+_0x5a71('0x11'),_0x5a71('0x12'));_0x1b3a05(null);}else{if(this[_0x5a71('0x6')][_0x5a71('0x13')]==_0x27ae03){_0x51e87d[_0x5a71('0xf')](_0x5a71('0x14')+this['id']+'\x27\x20mode\x20is\x20already\x20\x27'+_0x27ae03+'\x27',_0x5a71('0x12'));_0x1b3a05(null);}else{var _0x27de13=this['state'][_0x5a71('0x13')];this['state']['mode']=_0x27ae03;_0x51e87d[_0x5a71('0xf')](_0x5a71('0x14')+this['id']+_0x5a71('0x15')+_0x27ae03+'\x27',_0x5a71('0x12'));_0x51e87d[_0x5a71('0x16')][_0x5a71('0x17')](this['id'],_0x5a71('0x18'),{'previousMode':_0x27de13,'newMode':_0x27ae03});_0x1b3a05(_0x27de13);}}});}[_0x5a71('0x19')](){return new Promise((_0x5f5794,_0x15c683)=>{_0x51e87d[_0x5a71('0xf')]('docking\x20vacuum\x20\x27'+this['id']+_0x5a71('0xc'),_0x5a71('0xd'));var _0x3945a3={};_0x51e87d[_0x5a71('0x1')][_0x5a71('0x1a')](this['id'])[_0x5a71('0x1b')](_0x4ed850=>{if(!_0x4ed850){_0x51e87d[_0x5a71('0xf')](_0x5a71('0x1c')+this['id']+_0x5a71('0x11'),'debug');return![];}if(!_0x4ed850['room']){_0x51e87d[_0x5a71('0xf')](_0x5a71('0x1d'),_0x5a71('0xd'));return![];}_0x3945a3['roomId']=_0x4ed850['room']['id'];return _0x51e87d[_0x5a71('0x1e')][_0x5a71('0x1a')](_0x4ed850[_0x5a71('0x1f')]['id']);})['then'](_0x3db01a=>{if(!_0x3db01a){_0x51e87d['log'](_0x5a71('0x20')+_0x3945a3[_0x5a71('0x21')]+_0x5a71('0x11'),_0x5a71('0xd'));return![];}this[_0x5a71('0x6')]['location']={'id':_0x3db01a['id'],'name':_0x3db01a[_0x5a71('0x22')]};this['state'][_0x5a71('0x3')]=_0x51e87d[_0x5a71('0x1')][_0x5a71('0x2')][_0x5a71('0x3')][_0x5a71('0x23')];_0x51e87d[_0x5a71('0xf')](_0x5a71('0x14')+this['id']+'\x27\x20new\x20status\x20is\x20\x27'+this['state'][_0x5a71('0x3')]+'\x27',_0x5a71('0x12'));_0x51e87d[_0x5a71('0x16')][_0x5a71('0x17')](this['id'],_0x5a71('0x24'),{'newStatus':this[_0x5a71('0x6')][_0x5a71('0x3')]});return!![];})[_0x5a71('0x1b')](_0x71bc6b=>{this['state'][_0x5a71('0x25')]=Date[_0x5a71('0x5')]();_0x5f5794(_0x71bc6b);})[_0x5a71('0x26')](_0x4fe9f8=>{_0x15c683(_0x4fe9f8);});});}[_0x5a71('0x27')](_0x2f6e3c){return new Promise((_0x5cd55b,_0x188c2a)=>{_0x51e87d[_0x5a71('0xf')](_0x5a71('0xb')+this['id']+_0x5a71('0x28')+_0x2f6e3c+_0x5a71('0xc'),_0x5a71('0xd'));if(this[_0x5a71('0x6')][_0x5a71('0x3')]!=_0x51e87d[_0x5a71('0x1')][_0x5a71('0x2')][_0x5a71('0x3')][_0x5a71('0x29')]){_0x51e87d[_0x5a71('0xf')](_0x5a71('0x14')+this['id']+_0x5a71('0x2a')+_0x51e87d[_0x5a71('0x1')][_0x5a71('0x2')][_0x5a71('0x3')]['active']+'\x27',_0x5a71('0x12'));_0x5cd55b(![]);}_0x51e87d[_0x5a71('0x1e')][_0x5a71('0x1a')](_0x2f6e3c)['then'](_0x505d42=>{if(!_0x505d42){_0x51e87d[_0x5a71('0xf')](_0x5a71('0x20')+_0x2f6e3c+_0x5a71('0x11'),_0x5a71('0xd'));return![];}var _0x34dd18=this[_0x5a71('0x6')]['location'];this[_0x5a71('0x6')][_0x5a71('0x8')]={'id':_0x505d42['id'],'name':_0x505d42['name']};_0x51e87d[_0x5a71('0xf')](_0x5a71('0x14')+this['id']+_0x5a71('0x2b')+_0x2f6e3c+'\x27',_0x5a71('0x12'));_0x51e87d[_0x5a71('0x16')][_0x5a71('0x17')](this['id'],'locationChanged',{'previousLocation':_0x34dd18,'newLocation':this[_0x5a71('0x6')]['location']});return!![];})[_0x5a71('0x1b')](_0x3c5f6a=>{_0x5cd55b(_0x3c5f6a);})[_0x5a71('0x26')](_0x44d1a5=>{_0x188c2a(_0x44d1a5);});});}['start'](){return new Promise((_0x1c6e74,_0x14077b)=>{_0x51e87d[_0x5a71('0xf')]('changing\x20vacuum\x20\x27'+this['id']+_0x5a71('0x2c')+_0x51e87d[_0x5a71('0x1')][_0x5a71('0x2')][_0x5a71('0x3')][_0x5a71('0x29')]+_0x5a71('0xc'),_0x5a71('0xd'));if(this[_0x5a71('0x6')][_0x5a71('0x3')]==_0x51e87d[_0x5a71('0x1')][_0x5a71('0x2')][_0x5a71('0x3')][_0x5a71('0x29')]){_0x51e87d[_0x5a71('0xf')](_0x5a71('0x14')+this['id']+_0x5a71('0x2d')+_0x51e87d[_0x5a71('0x1')][_0x5a71('0x2')][_0x5a71('0x3')][_0x5a71('0x29')]+'\x27',_0x5a71('0x12'));_0x1c6e74(![]);}else if(this[_0x5a71('0x7')]<0x5){_0x51e87d[_0x5a71('0xf')](_0x5a71('0x14')+this['id']+_0x5a71('0x2e')+this['batteryLevel']+'\x27\x20is\x20low,\x20dock\x20to\x20recharge',_0x5a71('0x12'));_0x1c6e74(![]);}else{if(this[_0x5a71('0x6')]['dockedSince']){this[_0x5a71('0x6')][_0x5a71('0x2f')]+=(Date[_0x5a71('0x5')]()-this[_0x5a71('0x6')][_0x5a71('0x25')])/0x3e8/0x14;this[_0x5a71('0x6')]['dockedSince']=null;}this[_0x5a71('0x6')][_0x5a71('0x30')]=Date[_0x5a71('0x5')]();this[_0x5a71('0x6')][_0x5a71('0x3')]=_0x51e87d[_0x5a71('0x1')][_0x5a71('0x2')]['status'][_0x5a71('0x29')];_0x51e87d[_0x5a71('0xf')](_0x5a71('0x14')+this['id']+_0x5a71('0x31')+this[_0x5a71('0x6')][_0x5a71('0x3')]+'\x27',_0x5a71('0x12'));_0x51e87d[_0x5a71('0x16')]['push'](this['id'],_0x5a71('0x24'),{'newStatus':this[_0x5a71('0x6')][_0x5a71('0x3')]});_0x1c6e74(!![]);}});}[_0x5a71('0x32')](){return new Promise((_0x4742e2,_0x31181b)=>{_0x51e87d[_0x5a71('0xf')](_0x5a71('0xb')+this['id']+_0x5a71('0x2c')+_0x51e87d[_0x5a71('0x1')]['vacuum'][_0x5a71('0x3')][_0x5a71('0x4')]+_0x5a71('0xc'),'debug');if(this[_0x5a71('0x6')][_0x5a71('0x3')]==_0x51e87d[_0x5a71('0x1')][_0x5a71('0x2')]['status'][_0x5a71('0x4')]){_0x51e87d['log'](_0x5a71('0x14')+this['id']+_0x5a71('0x2d')+_0x51e87d[_0x5a71('0x1')][_0x5a71('0x2')]['status'][_0x5a71('0x4')]+'\x27',_0x5a71('0x12'));_0x4742e2(![]);}else{if(this[_0x5a71('0x6')][_0x5a71('0x30')]){this[_0x5a71('0x6')][_0x5a71('0x33')]+=(Date[_0x5a71('0x5')]()-this[_0x5a71('0x6')][_0x5a71('0x30')])/0x3e8/0x3c;this[_0x5a71('0x6')][_0x5a71('0x30')]=null;}this[_0x5a71('0x6')][_0x5a71('0x3')]=_0x51e87d[_0x5a71('0x1')][_0x5a71('0x2')][_0x5a71('0x3')][_0x5a71('0x4')];_0x51e87d[_0x5a71('0xf')](_0x5a71('0x14')+this['id']+_0x5a71('0x31')+this[_0x5a71('0x6')][_0x5a71('0x3')]+'\x27',_0x5a71('0x12'));_0x51e87d['events'][_0x5a71('0x17')](this['id'],'statusChanged',{'newStatus':this[_0x5a71('0x6')][_0x5a71('0x3')]});_0x4742e2(!![]);}});}[_0x5a71('0x34')](){return JSON[_0x5a71('0x35')](this);}get[_0x5a71('0x7')](){var _0x51c35d=this[_0x5a71('0x6')][_0x5a71('0x2f')];if(this[_0x5a71('0x6')]['status']==_0x51e87d[_0x5a71('0x1')][_0x5a71('0x2')][_0x5a71('0x3')][_0x5a71('0x23')])_0x51c35d+=(Date[_0x5a71('0x5')]()-this['state'][_0x5a71('0x25')])/0x3e8/0x3c;var _0x392ac8=this[_0x5a71('0x6')][_0x5a71('0x33')];if(this[_0x5a71('0x6')][_0x5a71('0x3')]==_0x51e87d[_0x5a71('0x1')][_0x5a71('0x2')][_0x5a71('0x3')][_0x5a71('0x29')])_0x392ac8+=(Date[_0x5a71('0x5')]()-this[_0x5a71('0x6')][_0x5a71('0x30')])/0x3e8/0x3c;var _0x175fad=_0x51c35d/0x2-_0x392ac8;if(_0x175fad<=0x0)return 0x0;else if(_0x175fad>=0xf0)return 0x64;else return Math['floor'](_0x175fad/0xf0*0x64);}static get[_0x5a71('0x3')](){return{'inactive':_0x5a71('0x4'),'active':_0x5a71('0x29'),'docked':_0x5a71('0x23')};}static get[_0x5a71('0xe')](){return{'mop':_0x5a71('0x36'),'vacuum':'vacuum'};}};return _0x23783c();}};