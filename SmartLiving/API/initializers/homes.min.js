var _0x1f3f=['log','debug','ensureIndex','error','home\x20database\x20loaded','info','nedb','path','homes','homes.db','models','toDto','insert','context','home','fromDto','update','_id','name','remove','find','map','config','general','paths','dbName'];(function(_0x44d52b,_0x2b9bc9){var _0x4f885d=function(_0x767845){while(--_0x767845){_0x44d52b['push'](_0x44d52b['shift']());}};_0x4f885d(++_0x2b9bc9);}(_0x1f3f,0x1c0));var _0x3639=function(_0x2fbeca,_0x302170){_0x2fbeca=_0x2fbeca-0x0;var _0x1ae02f=_0x1f3f[_0x2fbeca];return _0x1ae02f;};'use strict';var Datastore=require(_0x3639('0x0'));var Path=require(_0x3639('0x1'));module['exports']={'initialize':function(_0x1d51db,_0x468ffb){_0x1d51db[_0x3639('0x2')]={'dbName':_0x3639('0x3'),'create':function(_0x2c23fa){return new Promise((_0x24e922,_0x512ccb)=>{var _0x38e3e8=_0x1d51db[_0x3639('0x4')]['home'][_0x3639('0x5')](_0x2c23fa);_0x1d51db['db'][_0x3639('0x2')][_0x3639('0x6')](_0x38e3e8,(_0x4c2626,_0x36e2cc)=>{if(_0x4c2626){_0x4c2626[_0x3639('0x7')]={'entity':{'type':_0x3639('0x8'),'id':_0x38e3e8['name']}};_0x512ccb(_0x4c2626);}else{_0x24e922(_0x1d51db[_0x3639('0x4')][_0x3639('0x8')][_0x3639('0x9')](_0x36e2cc));}});});},'update':function(_0x369a8f){return new Promise((_0x568e49,_0x562aaa)=>{var _0x47db29=_0x1d51db['models'][_0x3639('0x8')][_0x3639('0x5')](_0x369a8f);_0x1d51db['db'][_0x3639('0x2')][_0x3639('0xa')]({'_id':_0x47db29[_0x3639('0xb')]},_0x47db29,{},(_0x45b809,_0x3aff34)=>{if(_0x45b809){_0x45b809[_0x3639('0x7')]={'entity':{'type':'home','id':_0x47db29[_0x3639('0xc')]}};_0x562aaa(_0x45b809);}else{_0x568e49(_0x3aff34==0x1);}});});},'delete':function(_0x41eacb){return new Promise((_0x27ee45,_0x3f9f81)=>{_0x1d51db['db'][_0x3639('0x2')][_0x3639('0xd')]({'_id':_0x41eacb},{},(_0x8254c8,_0x957799)=>{if(_0x8254c8){_0x3f9f81(_0x8254c8);}else{_0x27ee45(_0x957799==0x1);}});});},'retrieveAll':function(){return new Promise((_0x329280,_0x6a4c27)=>{_0x1d51db['db'][_0x3639('0x2')][_0x3639('0xe')]({},(_0x5d68e2,_0x59878d)=>{if(_0x5d68e2){_0x6a4c27(_0x5d68e2);}else{var _0x46b919=_0x59878d[_0x3639('0xf')](_0x516b83=>{return _0x1d51db[_0x3639('0x4')]['home'][_0x3639('0x9')](_0x516b83);});_0x329280(_0x46b919);}});});},'retrieveById':function(_0x4fd3e){return new Promise((_0x119dd7,_0x856d58)=>{_0x1d51db['db'][_0x3639('0x2')]['findOne']({'_id':_0x4fd3e},(_0x4107ad,_0x166737)=>{if(_0x4107ad){_0x856d58(_0x4107ad);}else{_0x119dd7(_0x1d51db[_0x3639('0x4')][_0x3639('0x8')][_0x3639('0x9')](_0x166737));}});});}};return _0x468ffb();},'start':function(_0xaefa49,_0x237cf0){var _0x8e0736=Path['join'](_0xaefa49[_0x3639('0x10')][_0x3639('0x11')][_0x3639('0x12')]['db'][0x0],_0xaefa49['homes'][_0x3639('0x13')]);_0xaefa49[_0x3639('0x14')]('loading\x20home\x20database\x20['+_0x8e0736+']...',_0x3639('0x15'));_0xaefa49['db']=_0xaefa49['db']||{};_0xaefa49['db'][_0x3639('0x2')]=new Datastore({'filename':_0x8e0736,'autoload':!![]});_0xaefa49['db'][_0x3639('0x2')][_0x3639('0x16')]({'fieldName':_0x3639('0xc'),'unique':!![]},_0x1a5e32=>{if(_0x1a5e32)_0xaefa49[_0x3639('0x14')](_0x1a5e32,_0x3639('0x17'));});_0xaefa49[_0x3639('0x14')](_0x3639('0x18'),_0x3639('0x19'));return _0x237cf0();}};