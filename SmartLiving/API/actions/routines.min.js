var _0x2582=['response','\x27\x20for\x20action\x20name\x20\x27','connection','map','retrieveById','then','name','Delete\x20an\x20existing\x20routine','invalid\x20device\x20id\x20\x27','\x27\x20for\x20device\x20id\x20\x27','update','create','retrieveRooutines','request','retrieveAll','models','devices','deviceLogs','type','find','createRoutine','Retrieve\x20a\x20specific\x20routine','actionName','constraint','c39181d52abe5555','finally','retrieveRoutine','handle','deviceTypes','1234','routines','input','updateRoutine','filter','catch','invalid\x20action\x20name\x20\x27','instance','object','routine','webSocket','Executes\x20a\x20specific\x20routine','errors','warning','invalid\x20number\x20of\x20parameters\x20\x27','result','getInternalState','Updates\x20an\x20existing\x20routine','actions','meta','info','state','api.validators.routineId','deviceLog','params','invalid\x20routine\x20id\x20\x27','validators','delete','routineId','rawConnection','all','deleteRoutine','codes','log','device','armStay','forEach','length','executeRoutine','good\x20night','Routine','body','formatters','turnOff'];(function(_0x12ec29,_0x2582fc){var _0xc14468=function(_0x23d5fb){while(--_0x23d5fb){_0x12ec29['push'](_0x12ec29['shift']());}};_0xc14468(++_0x2582fc);}(_0x2582,0xb3));var _0xc144=function(_0x12ec29,_0x2582fc){_0x12ec29=_0x12ec29-0x0;var _0xc14468=_0x2582[_0x12ec29];return _0xc14468;};'use strict';const modelSchema={'title':_0xc144('0x5'),'required':[_0xc144('0x2e'),_0xc144('0xe')],'schema':{'name':{'type':'string','example':_0xc144('0x23')},'actions':{'type':'object','example':[{'device':{'id':_0xc144('0x40')},'actionName':_0xc144('0x27'),'params':[],'meta':{}},{'device':{'id':'f597c13717008fb1'},'actionName':_0xc144('0x1f'),'params':[_0xc144('0x45')],'meta':{}}]},'meta':{'type':_0xc144('0x4'),'example':{}}}};exports[_0xc144('0x3c')]={'name':_0xc144('0x3c'),'description':'Creates\x20a\x20new\x20routine','blockedConnectionTypes':['webSocket'],'version':1.6,'modelSchema':modelSchema,'outputExample':{},'tags':[_0xc144('0x24')],'run':function(_0x4efd21,_0x53df38,_0x4d6055){var _0x386512=_0x53df38[_0xc144('0x2a')][_0xc144('0x19')][_0xc144('0x14')][_0xc144('0x25')];_0x4efd21['log'](_0x4efd21[_0xc144('0x26')][_0xc144('0x35')](_0xc144('0x3c'),_0x386512),_0xc144('0x10'));_0x4efd21[_0xc144('0x16')][_0xc144('0x5')](_0x386512)['then'](_0x231cb1=>{return _0x4efd21[_0xc144('0x46')][_0xc144('0x33')](_0x231cb1);})[_0xc144('0x2d')](_0x146d98=>{_0x53df38[_0xc144('0x28')][_0xc144('0xb')]=_0x146d98;_0x4d6055();})[_0xc144('0x1')](_0x5114d5=>{_0x4d6055(_0x4efd21[_0xc144('0x8')][_0xc144('0x43')](_0x5114d5));})['finally'](()=>{_0x4efd21[_0xc144('0x1d')](_0x4efd21[_0xc144('0x26')][_0xc144('0x28')](_0xc144('0x3c'),_0x53df38[_0xc144('0x28')]),_0xc144('0x10'));});}};exports[_0xc144('0x48')]={'name':_0xc144('0x48'),'description':_0xc144('0xd'),'blockedConnectionTypes':[_0xc144('0x6')],'version':1.6,'modelSchema':modelSchema,'inputs':{'routineId':{'required':!![],'validator':_0xc144('0x12')}},'outputExample':{},'tags':[_0xc144('0x24')],'run':function(_0x4210e4,_0x2b2069,_0x5c0c1f){var _0x223707=_0x2b2069['connection'][_0xc144('0x19')][_0xc144('0x14')][_0xc144('0x25')];_0x4210e4[_0xc144('0x1d')](_0x4210e4['formatters']['request'](_0xc144('0x48'),_0x223707),'info');var _0x453361={};_0x4210e4['validators'][_0xc144('0x5')](_0x223707)[_0xc144('0x2d')](_0x8c8e05=>{_0x453361['routine']=_0x8c8e05;return _0x4210e4[_0xc144('0x46')][_0xc144('0x2c')](_0x2b2069[_0xc144('0x14')][_0xc144('0x18')]);})[_0xc144('0x2d')](_0x2aff03=>{if(!_0x2aff03)throw{'code':_0x4210e4[_0xc144('0x8')][_0xc144('0x1c')][_0xc144('0x47')],'description':_0xc144('0x15')+_0x2b2069['params'][_0xc144('0x18')]+'\x27'};_0x2aff03[_0xc144('0x2e')]=_0x453361['routine'][_0xc144('0x2e')];_0x2aff03[_0xc144('0xe')]=_0x453361[_0xc144('0x5')][_0xc144('0xe')];_0x2aff03['meta']=_0x453361['routine'][_0xc144('0xf')];return _0x4210e4[_0xc144('0x46')][_0xc144('0x32')](_0x2aff03);})[_0xc144('0x2d')](_0x42766d=>{_0x2b2069[_0xc144('0x28')][_0xc144('0xb')]=_0x42766d;_0x5c0c1f();})[_0xc144('0x1')](_0x35b0aa=>{_0x5c0c1f(_0x4210e4[_0xc144('0x8')][_0xc144('0x43')](_0x35b0aa));})[_0xc144('0x41')](()=>{_0x4210e4[_0xc144('0x1d')](_0x4210e4['formatters'][_0xc144('0x28')](_0xc144('0x48'),_0x2b2069[_0xc144('0x28')]),_0xc144('0x10'));});}};exports[_0xc144('0x1b')]={'name':_0xc144('0x1b'),'description':_0xc144('0x2f'),'blockedConnectionTypes':['webSocket'],'version':1.6,'modelSchema':null,'inputs':{'routineId':{'routineId':!![],'validator':_0xc144('0x12')}},'outputExample':{},'tags':[_0xc144('0x24')],'run':function(_0x15b751,_0x16a772,_0x1b1184){_0x15b751[_0xc144('0x46')][_0xc144('0x17')](_0x16a772[_0xc144('0x14')][_0xc144('0x18')])[_0xc144('0x2d')](_0x3d30b9=>{if(!_0x3d30b9)throw{'code':_0x15b751[_0xc144('0x8')][_0xc144('0x1c')][_0xc144('0x47')],'description':_0xc144('0x15')+_0x16a772[_0xc144('0x14')][_0xc144('0x18')]+'\x27'};_0x16a772[_0xc144('0x28')]['result']=_0x3d30b9;_0x1b1184();})[_0xc144('0x1')](_0x37a38d=>{_0x1b1184(_0x15b751[_0xc144('0x8')]['handle'](_0x37a38d));})['then'](()=>{_0x15b751['log'](_0x15b751[_0xc144('0x26')]['response'](_0xc144('0x1b'),_0x16a772['response']),_0xc144('0x10'));});}};exports['retrieveRoutines']={'name':'retrieveRoutines','description':'Retrieve\x20all\x20routines','blockedConnectionTypes':[_0xc144('0x6')],'version':1.6,'modelSchema':null,'outputExample':{},'tags':[_0xc144('0x24')],'run':function(_0x2ce60a,_0x322631,_0x20a197){_0x2ce60a[_0xc144('0x46')][_0xc144('0x36')]()['then'](_0x34808d=>{_0x322631['response'][_0xc144('0xb')]=_0x34808d;_0x20a197();})[_0xc144('0x1')](_0x1c5238=>{_0x20a197(_0x2ce60a[_0xc144('0x8')]['handle'](_0x1c5238));})[_0xc144('0x2d')](()=>{_0x2ce60a[_0xc144('0x1d')](_0x2ce60a[_0xc144('0x26')]['response'](_0xc144('0x34'),_0x322631[_0xc144('0x28')]),_0xc144('0x10'));});}};exports[_0xc144('0x42')]={'name':_0xc144('0x42'),'description':_0xc144('0x3d'),'blockedConnectionTypes':[_0xc144('0x6')],'version':1.6,'modelSchema':null,'inputs':{'routineId':{'required':!![],'validator':'api.validators.routineId'}},'outputExample':{},'tags':[_0xc144('0x24')],'run':function(_0x4cc8b2,_0x3fd06f,_0x4ec57b){_0x4cc8b2[_0xc144('0x46')][_0xc144('0x2c')](_0x3fd06f['params'][_0xc144('0x18')])['then'](_0x24cd5b=>{if(!_0x24cd5b)throw{'code':_0x4cc8b2[_0xc144('0x8')][_0xc144('0x1c')][_0xc144('0x47')],'description':_0xc144('0x15')+_0x3fd06f[_0xc144('0x14')]['routineId']+'\x27'};_0x3fd06f[_0xc144('0x28')][_0xc144('0xb')]=_0x24cd5b;_0x4ec57b();})['catch'](_0x127375=>{_0x4ec57b(_0x4cc8b2[_0xc144('0x8')]['handle'](_0x127375));})[_0xc144('0x2d')](()=>{_0x4cc8b2[_0xc144('0x1d')](_0x4cc8b2['formatters'][_0xc144('0x28')](_0xc144('0x42'),_0x3fd06f['response']),_0xc144('0x10'));});}};exports[_0xc144('0x22')]={'name':_0xc144('0x22'),'description':_0xc144('0x7'),'blockedConnectionTypes':[_0xc144('0x6')],'version':1.6,'modelSchema':null,'inputs':{'routineId':{'required':!![],'validator':_0xc144('0x12')}},'outputExample':{},'tags':[_0xc144('0x24')],'run':function(_0x4f4152,_0x5d9bea,_0x3f370e){_0x4f4152[_0xc144('0x46')]['retrieveById'](_0x5d9bea[_0xc144('0x14')][_0xc144('0x18')])[_0xc144('0x2d')](_0x3956ad=>{if(!_0x3956ad)throw{'code':_0x4f4152['errors'][_0xc144('0x1c')][_0xc144('0x47')],'description':_0xc144('0x15')+_0x5d9bea[_0xc144('0x14')][_0xc144('0x18')]+'\x27'};let _0x482c0f={};var _0x3b2a5c=_0x3956ad[_0xc144('0xe')][_0xc144('0x2b')](_0x469fe6=>{return new Promise((_0x3bf5c4,_0x29e2d8)=>{let _0x254b13={};_0x4f4152[_0xc144('0x38')][_0xc144('0x2c')](_0x469fe6[_0xc144('0x1e')]['id'])[_0xc144('0x2d')](_0x1aa5fe=>{if(!_0x1aa5fe)throw{'code':_0x4f4152[_0xc144('0x8')]['codes']['input'],'description':_0xc144('0x30')+_0x469fe6[_0xc144('0x1e')]['id']+'\x27'};_0x254b13[_0xc144('0x1e')]=_0x1aa5fe;return _0x4f4152[_0xc144('0x44')][_0xc144('0x2c')](_0x1aa5fe[_0xc144('0x3a')]['id']);})['then'](_0x1fbaca=>{var _0x3f3d4e=_0x1fbaca['actions'][_0xc144('0x3b')](_0x4f51ba=>{return _0x4f51ba['name']==_0x469fe6[_0xc144('0x3e')];});if(!_0x3f3d4e)throw{'code':_0x4f4152[_0xc144('0x8')][_0xc144('0x1c')][_0xc144('0x47')],'description':_0xc144('0x2')+_0x469fe6[_0xc144('0x3e')]+_0xc144('0x31')+_0x254b13[_0xc144('0x1e')]['id']+'\x27'};_0x254b13[_0xc144('0x3e')]=_0x3f3d4e[_0xc144('0x2e')];if(_0x3f3d4e[_0xc144('0x14')]['length']!=_0x469fe6[_0xc144('0x14')][_0xc144('0x21')])throw{'code':_0x4f4152[_0xc144('0x8')][_0xc144('0x1c')][_0xc144('0x47')],'description':_0xc144('0xa')+_0x469fe6[_0xc144('0x14')][_0xc144('0x21')]+_0xc144('0x29')+_0x469fe6[_0xc144('0x3e')]+'\x27'};_0x254b13['instance']=_0x482c0f[_0x254b13[_0xc144('0x1e')]['id']];if(!_0x254b13[_0xc144('0x3')]){_0x254b13[_0xc144('0x3')]=new _0x4f4152[(_0xc144('0x38'))][_0x1fbaca[(_0xc144('0x2e'))]](_0x254b13['device']['id'],_0x254b13['device'][_0xc144('0x11')]);_0x482c0f[_0x254b13[_0xc144('0x1e')]['id']]=_0x254b13[_0xc144('0x3')];}_0x254b13[_0xc144('0xb')]=![];switch(_0x469fe6[_0xc144('0x14')][_0xc144('0x21')]){case 0x0:return _0x254b13[_0xc144('0x3')][_0x469fe6[_0xc144('0x3e')]]();case 0x1:return _0x254b13[_0xc144('0x3')][_0x469fe6['actionName']](_0x469fe6[_0xc144('0x14')][0x0]);case 0x2:return _0x254b13['instance'][_0x469fe6[_0xc144('0x3e')]](_0x469fe6[_0xc144('0x14')][0x0],_0x469fe6[_0xc144('0x14')][0x1]);}})['then'](_0x15c775=>{_0x254b13['result']=_0x15c775;_0x254b13[_0xc144('0x1e')]['state']=_0x254b13[_0xc144('0x3')][_0xc144('0xc')]();return _0x4f4152[_0xc144('0x38')][_0xc144('0x32')](_0x254b13[_0xc144('0x1e')]);})[_0xc144('0x2d')](_0x1aebb3=>{var _0x201023=new _0x4f4152[(_0xc144('0x37'))][(_0xc144('0x13'))](new Date()['toISOString'](),_0x254b13['device']['id'],_0x254b13['actionName'],_0x254b13[_0xc144('0x14')],_0x254b13[_0xc144('0xb')]);return _0x4f4152[_0xc144('0x39')][_0xc144('0x33')](_0x201023);})[_0xc144('0x2d')](_0x3baf24=>{_0x3bf5c4(_0x254b13[_0xc144('0xb')]);})[_0xc144('0x1')](_0x1f116f=>{_0x29e2d8(_0x1f116f);});});});return Promise[_0xc144('0x1a')](_0x3b2a5c);})[_0xc144('0x2d')](_0x2a89ef=>{var _0x109bcc=_0x2a89ef[_0xc144('0x0')](_0x1b2198=>{return _0x1b2198 instanceof Error;});if(_0x109bcc['length']>0x0){var _0x5b841a=[];_0x109bcc[_0xc144('0x20')](_0x587df3=>{_0x4f4152[_0xc144('0x1d')](_0x587df3['message'],_0xc144('0x9'));_0x5b841a['push'](_0x587df3['message']);});_0x3f370e(_0x4f4152[_0xc144('0x8')]['handle']({'code':_0x4f4152['errors'][_0xc144('0x1c')][_0xc144('0x3f')],'description':_0x5b841a}));}else{_0x5d9bea['response'][_0xc144('0xb')]=_0x2a89ef;_0x3f370e();}})[_0xc144('0x1')](_0x2961cc=>{_0x3f370e(_0x4f4152[_0xc144('0x8')][_0xc144('0x43')](_0x2961cc));})[_0xc144('0x2d')](()=>{_0x4f4152[_0xc144('0x1d')](_0x4f4152[_0xc144('0x26')]['response'](_0xc144('0x22'),_0x5d9bea[_0xc144('0x28')]),_0xc144('0x10'));});}};